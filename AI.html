<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>AI Inspirational Quote Generator</title>
    <style>
        :root{--bg:#0f1724;--card:#0b1220;--accent:#7c5cff;--muted:#9aa4b2;color-scheme:dark}
        *{box-sizing:border-box;font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,"Helvetica Neue",Arial}
        html,body{height:100%;margin:0;background:linear-gradient(180deg,#071021 0%,#071233 60%);display:flex;align-items:center;justify-content:center}
        .card{width:min(760px,94%);background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);border:1px solid rgba(255,255,255,0.04);padding:22px;border-radius:12px;backdrop-filter:blur(6px)}
        h1{margin:0 0 8px;font-size:20px;color:#fff}
        p.lead{margin:0 0 16px;color:var(--muted);font-size:13px}
        .controls{display:flex;gap:10px;flex-wrap:wrap;margin-bottom:14px}
        input[type="text"], input[type="password"], select, textarea{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:10px;border-radius:8px;color:#e6eef8;min-width:0}
        .grow{flex:1}
        button{background:var(--accent);color:white;border:0;padding:10px 14px;border-radius:8px;cursor:pointer}
        .row{display:flex;gap:10px;align-items:center}
        .quoteBox{padding:20px;border-radius:10px;background:linear-gradient(180deg,rgba(124,92,255,0.12),transparent);min-height:140px;display:flex;flex-direction:column;justify-content:center;gap:10px}
        .quoteText{font-size:20px;color:#fff;line-height:1.35}
        .author{color:var(--muted);font-size:14px;text-align:right}
        .actions{display:flex;gap:8px;margin-top:12px;justify-content:flex-end}
        .chip{background:rgba(255,255,255,0.03);padding:6px 8px;border-radius:999px;font-size:13px;color:var(--muted)}
        label{font-size:13px;color:var(--muted);display:flex;gap:8px;align-items:center}
        .small{font-size:12px;color:var(--muted)}
    </style>
</head>
<body>
    <div class="card" role="main">
        <h1>AI Inspirational Quote Generator</h1>
        <p class="lead">Generate uplifting quotes. Use the local AI (fast, offline) or connect to OpenAI by pasting an API key (optional).</p>

        <div class="controls">
            <input id="topic" type="text" placeholder="Enter your topic" class="grow" />

            <select id="tone" class="chip" title="Tone">
                <option value="uplifting">Uplifting</option>
                <option value="calm">Calm</option>
                <option value="bold">Bold</option>
                <option value="reflective">Reflective</option>
            </select>

            <select id="audience" class="chip" title="Target Audience">
                <option value="general">General</option>
                <option value="students">Students</option>
                <option value="professionals">Professionals</option>
                <option value="entrepreneurs">Entrepreneurs</option>
                <option value="creatives">Creatives</option>
            </select>

            <label class="small">
                <input id="useOpenAI" type="checkbox" /> Use OpenAI
            </label>

            <input id="apiKey" type="password" placeholder="Paste OpenAI API key (sk-...)" style="min-width:240px;display:none" />
            <button id="generate">Generate</button>
        </div>

        <div class="quoteBox" id="quoteBox">
            <div class="quoteText" id="quote">Press Generate to create an inspirational quote.</div>
            <div class="author" id="author"></div>
            <div class="actions">
                <button id="copy">Copy</button>
                <button id="speak">Speak</button>
                <button id="newStyle">New Style</button>
            </div>
        </div>
    </div>

    <script>
        // GitHub Copilot
        const tonePhrases = {
            uplifting: ["embrace the challenge", "rise with courage", "your effort matters", "seek small wins", "light follows persistence"],
            calm: ["breathe and return", "gentle steps forward", "stillness reveals truth", "softly unfold", "quiet strength"],
            bold: ["seize the moment", "break the limits", "make the leap", "fear is fuel", "claim your path"],
            reflective: ["questions sharpen vision", "lessons whisper softly", "time reveals pattern", "remember the why", "truth in reflection"]
        };

        const authors = ["— A Thought", "— Unknown", "— Inner Voice", "— A Friend", "— The Journey", "— Modern Sage"];

        const quoteEl = document.getElementById('quote');
        const authorEl = document.getElementById('author');
        const topicInput = document.getElementById('topic');
        const toneSelect = document.getElementById('tone');
        const audienceSelect = document.getElementById('audience');
        const generateBtn = document.getElementById('generate');
        const copyBtn = document.getElementById('copy');
        const speakBtn = document.getElementById('speak');
        const newStyleBtn = document.getElementById('newStyle');
        const useOpenAICheck = document.getElementById('useOpenAI');
        const apiKeyInput = document.getElementById('apiKey');

        useOpenAICheck.addEventListener('change', e => {
            apiKeyInput.style.display = e.target.checked ? 'inline-block' : 'none';
        });

        function randomOf(arr){ return arr[Math.floor(Math.random()*arr.length)]; }

        function localAI(topic, tone, audience){
            const phrases = tonePhrases[tone] || tonePhrases.uplifting;
            const p1 = randomOf(phrases);
            const p2 = randomOf(phrases);
            const startTemplates = [
                "When exploring %s, %s, for every %s begins with a first step.",
                "In the realm of %s, %s — this is how %s find their path.",
                "For those seeking %s: %s, and watch how %s unfolds.",
                "%s teaches us to %s, a lesson every %s should remember.",
                "The journey through %s shows that %s, inspiring all %s to grow."
            ];
            const template = randomOf(startTemplates);
            const audienceTerms = {
                general: "person",
                students: "learner",
                professionals: "professional",
                entrepreneurs: "entrepreneur",
                creatives: "creator"
            };
            const audienceTerm = audienceTerms[audience] || "person";
            const topicText = topic ? topic.trim() : randomOf(["growth", "success", "wisdom", "progress"]);
            const quote = template
                .replace("%s", topicText)
                .replace("%s", p1)
                .replace("%s", audienceTerm);
            return { text: capitalize(quote), author: randomOf(authors) };
        }

        function capitalize(s){ return s.charAt(0).toUpperCase() + s.slice(1); }

        async function callOpenAI(seed, tone, apiKey){
            const prompt = `Generate a single short inspirational quote (10-25 words) and a one-line author name. Tone: ${tone}. Seed or subject: ${seed || 'none'}. Output JSON like: {"quote":"...","author":"..."} without extra text.`;
            const res = await fetch('https://api.openai.com/v1/chat/completions', {
                method: 'POST',
                headers: {
                    'Content-Type':'application/json',
                    'Authorization':'Bearer ' + apiKey
                },
                body: JSON.stringify({
                    model: 'gpt-3.5-turbo',
                    messages: [{role:'system',content:'You are a concise quote generator.'},{role:'user',content:prompt}],
                    max_tokens: 80,
                    temperature: 0.85
                })
            });
            if(!res.ok) throw new Error('OpenAI error: ' + res.status);
            const data = await res.json();
            const content = data.choices?.[0]?.message?.content || '';
            // try to parse JSON from model output
            try {
                const parsed = JSON.parse(content);
                return { text: parsed.quote || content, author: parsed.author || '— Unknown' };
            } catch (e) {
                // fallback: attempt to split into quote and author by newline
                const lines = content.trim().split('\n').filter(Boolean);
                return { text: lines[0] || content, author: lines[1] || '— Unknown' };
            }
        }

        async function generate(){
            setLoading(true);
            const topic = topicInput.value;
            const tone = toneSelect.value;
            const audience = audienceSelect.value;
            if(useOpenAICheck.checked && apiKeyInput.value.trim()){
                try {
                    const out = await callOpenAI(topic, tone, apiKeyInput.value.trim());
                    showQuote(out.text, out.author);
                } catch (err) {
                    console.warn(err);
                    const out = localAI(topic, tone, audience);
                    showQuote(out.text + " (local fallback)", out.author);
                } finally { setLoading(false); }
            } else {
                const out = localAI(topic, tone, audience);
                showQuote(out.text, out.author);
                setLoading(false);
            }
        }

        function showQuote(text, authorText){
            quoteEl.textContent = text;
            authorEl.textContent = authorText;
            // subtle background color change
            document.querySelector('.card').style.borderColor = `rgba(124,92,255,0.2)`;
        }

        function setLoading(isLoading){
            generateBtn.disabled = isLoading;
            generateBtn.textContent = isLoading ? 'Generating…' : 'Generate';
        }

        generateBtn.addEventListener('click', generate);

        copyBtn.addEventListener('click', () => {
            const txt = `${quoteEl.textContent}\n${authorEl.textContent}`;
            navigator.clipboard?.writeText(txt);
        });

        speakBtn.addEventListener('click', () => {
            if('speechSynthesis' in window){
                speechSynthesis.cancel();
                const u = new SpeechSynthesisUtterance(`${quoteEl.textContent} ${authorEl.textContent}`);
                u.lang = 'en-US';
                speechSynthesis.speak(u);
            }
        });

        newStyleBtn.addEventListener('click', () => {
            // tweak font size and spacing randomly for "style"
            quoteEl.style.fontSize = (18 + Math.floor(Math.random()*8)) + 'px';
            quoteEl.style.letterSpacing = (0 + Math.random()*0.6).toFixed(2) + 'px';
        });

        // generate initial quote
        showQuote("Press Generate to create an inspirational quote.", "");
    </script>
</body>
</html>